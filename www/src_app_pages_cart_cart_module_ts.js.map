{"version":3,"file":"src_app_pages_cart_cart_module_ts.js","mappings":"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","sources":["./src/app/pages/cart/cart-routing.module.ts","./src/app/pages/cart/cart.module.ts","./src/app/pages/cart/cart.page.ts","./src/app/pages/cart/cart.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { CartPage } from './cart.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CartPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class CartPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { CartPageRoutingModule } from './cart-routing.module';\r\n\r\nimport { CartPage } from './cart.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    CartPageRoutingModule\r\n  ],\r\n  declarations: [CartPage]\r\n})\r\nexport class CartPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { CartService } from '../../services/cart.service';\r\nimport { Subscription } from 'rxjs';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { DeliveryPage } from '../delivery/delivery.page';\r\nimport { ApiService } from 'src/app/services/api.service';\r\n\r\n@Component({\r\n  selector: 'app-cart',\r\n  templateUrl: './cart.page.html',\r\n  styleUrls: ['./cart.page.scss'],\r\n})\r\nexport class CartPage implements OnInit {\r\n  cartProducts: any[] = [];\r\n  total: number = 0;\r\n  cartSubscription!: Subscription;\r\n\r\n  constructor(\r\n    private cartService: CartService,\r\n    private modalController: ModalController,\r\n    private apiService: ApiService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.loadCartProducts();\r\n    this.cartSubscription = this.cartService.getCartProducts().subscribe(products => {\r\n      this.cartProducts = products;\r\n      this.calculateTotal();\r\n    });\r\n  }\r\n\r\n\r\n  loadCartProducts() {\r\n    const cartProducts = localStorage.getItem('cartProducts');\r\n    if (cartProducts) {\r\n      this.cartProducts = JSON.parse(cartProducts);\r\n      this.cartService.setCartProducts(this.cartProducts); // Agrega esta línea\r\n      this.calculateTotal();\r\n    }\r\n  }\r\n\r\n  calculateTotal() {\r\n    this.total = this.cartProducts.reduce((acc, product) => acc + product.precio, 0);\r\n  }\r\n\r\n  removeProduct(index: number) {\r\n    this.cartProducts.splice(index, 1);\r\n    localStorage.setItem('cartProducts', JSON.stringify(this.cartProducts));\r\n    this.calculateTotal();\r\n    this.cartService.setCartProducts(this.cartProducts);\r\n  }\r\n\r\n  async openDeliveryPage() {\r\n    const modal = await this.modalController.create({\r\n      component: DeliveryPage,\r\n      componentProps: {\r\n        cartProducts: this.cartProducts // Pasa los productos del carrito al modal\r\n      }\r\n    });\r\n\r\n    modal.onDidDismiss().then((dataReturned) => {\r\n      if (dataReturned !== null) {\r\n        console.log('Modal Sent Data :', dataReturned);\r\n      }\r\n    });\r\n\r\n    return await modal.present();\r\n  }\r\n\r\n  clearCart() {\r\n    this.cartProducts = [];\r\n    localStorage.removeItem('cartProducts');\r\n    this.cartService.setCartProducts(this.cartProducts);\r\n    this.calculateTotal();\r\n  }\r\n\r\n}\r\n","<ion-header [translucent]=\"true\">\r\n  <ion-toolbar>\r\n    <ion-title>Mi carrito</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content [fullscreen]=\"true\">\r\n  <ion-header collapse=\"condense\">\r\n    <ion-toolbar>\r\n      <ion-title size=\"large\"><i class=\"fa-solid fa-arrow-left\" routerLink=\"/tabs/home\"></i> Mi carrito</ion-title>\r\n    </ion-toolbar>\r\n  </ion-header>\r\n\r\n  <div *ngIf=\"cartProducts.length === 0\" class=\"ion-text-center\">\r\n    <p>Tu carrito esta vacio agrega productos</p>\r\n    <ion-button color=\"dark\" shape=\"round\" routerLink=\"/tabs/home\">Productos</ion-button>\r\n</div>\r\n\r\n  <ion-card class=\"ion-padding\" *ngFor=\"let product of cartProducts; let i = index\">\r\n    <ion-item class=\"no-lines\">\r\n      <ion-thumbnail slot=\"start\">\r\n        <img [src]=\"product.imagen ? ('https://mercadito-app.azurewebsites.net/images/products/' + product.imagen) : 'https://via.placeholder.com/150'\" alt=\"Product Image\"/>\r\n      </ion-thumbnail>\r\n      <ion-icon color=\"danger\" aria-hidden=\"true\" name=\"trash\" slot=\"end\" (click)=\"removeProduct(i)\"></ion-icon>\r\n      <ion-note color=\"dark\">\r\n        <p>{{ product.nombre }}</p>\r\n        <b>${{ product.precio }}</b>\r\n      </ion-note>\r\n    </ion-item>\r\n  </ion-card>\r\n</ion-content>\r\n\r\n<ion-footer *ngIf=\"cartProducts.length > 0\">\r\n  <ion-toolbar>\r\n    <ion-row>\r\n      <ion-col>\r\n        <p style=\"font-size: 12px; margin-left: 10px;\">Total</p>\r\n        <p style=\"font-size: 16px; margin-left: 10px; margin-top: -10px;\"><b>${{ total | number:'1.2-2' }}</b></p>\r\n      </ion-col>\r\n      <ion-col class=\"ion-text-end\">\r\n        <ion-button style=\"margin-top: 15px;\" shape=\"round\" color=\"dark\" (click)=\"openDeliveryPage()\">Continuar <i class=\"fa-solid fa-angle-right\"></i></ion-button>\r\n      </ion-col>\r\n    </ion-row>\r\n  </ion-toolbar>\r\n</ion-footer>\r\n"],"names":["RouterModule","CartPage","routes","path","component","CartPageRoutingModule","forChild","imports","i1","exports","CommonModule","FormsModule","IonicModule","CartPageModule","declarations","DeliveryPage","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵlistener","CartPage_ion_card_11_Template_ion_icon_click_4_listener","i_r2","ɵɵrestoreView","_r1","index","ctx_r2","ɵɵnextContext","ɵɵresetView","removeProduct","ɵɵadvance","ɵɵproperty","product_r4","imagen","ɵɵsanitizeUrl","ɵɵtextInterpolate","nombre","ɵɵtextInterpolate1","precio","CartPage_ion_footer_12_Template_ion_button_click_11_listener","_r5","openDeliveryPage","ɵɵpipeBind2","total","constructor","cartService","modalController","apiService","cartProducts","ngOnInit","loadCartProducts","cartSubscription","getCartProducts","subscribe","products","calculateTotal","localStorage","getItem","JSON","parse","setCartProducts","reduce","acc","product","splice","setItem","stringify","_this","_asyncToGenerator","modal","create","componentProps","onDidDismiss","then","dataReturned","console","log","present","clearCart","removeItem","ɵɵdirectiveInject","CartService","i2","ModalController","i3","ApiService","selectors","decls","vars","consts","template","CartPage_Template","rf","ctx","ɵɵtemplate","CartPage_div_10_Template","CartPage_ion_card_11_Template","CartPage_ion_footer_12_Template","length"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}