"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3825],{3825:(S,v,s)=>{s.r(v),s.d(v,{RegisterPageModule:()=>j});var b=s(177),u=s(4341),n=s(7863),p=s(8160),f=s(467),e=s(4438),R=s(3366),F=s(4796);const y=["registerForm"],C=[{path:"",component:(()=>{var o;class l{constructor(t,r,i,c){this.apiService=t,this.router=r,this.authService=i,this.toastController=c,this.tipo_usuario=!1}ngOnInit(){}updateTipoLabel(){document.getElementById("tipo_label").textContent=this.tipo_usuario?"Vendedor":"Comprador"}onRegister(t){var r=this;new FormData,this.apiService.register({usuario:t.value.usuario,boleta:t.value.boleta,password:t.value.password,password_conf:t.value.password_conf,email:t.value.email,tipo_usuario:this.tipo_usuario?"vendedor":"comprador"}).subscribe(function(){var a=(0,f.A)(function*(d){console.log("Respuesta del registro:",d),(yield r.toastController.create({message:d,duration:2e3,position:"top"})).present(),r.apiService.login(t.value.boleta,t.value.password).subscribe(m=>{localStorage.setItem("currentUser",JSON.stringify(m));const h=localStorage.getItem("currentUser");null!==h&&(r.authService.setCurrentUser(JSON.parse(h)),r.authService.setLoggedIn(!0)),r.router.navigate(["/"])},m=>{console.error("Error al iniciar sesi\xf3n despu\xe9s del registro:",m)})});return function(d){return a.apply(this,arguments)}}(),function(){var a=(0,f.A)(function*(d){console.error("Error al registrar:",d),(yield r.toastController.create({message:d.error,duration:2e3,position:"top"})).present()});return function(d){return a.apply(this,arguments)}}())}}return(o=l).\u0275fac=function(t){return new(t||o)(e.rXU(R.G),e.rXU(p.Ix),e.rXU(F.u),e.rXU(n.K_))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-register"]],viewQuery:function(t,r){if(1&t&&e.GBs(y,5),2&t){let i;e.mGM(i=e.lsd())&&(r.registerForm=i.first)}},decls:39,vars:2,consts:[["registerForm","ngForm"],["color","light",1,"ion-padding"],["size","large","name","arrow-back","routerLink","/"],["size","large"],[3,"ngSubmit"],["color","light",1,"ion-no-padding"],["type","text","position","stacked"],["type","text","ngModel","","name","usuario","required",""],["position","stacked"],["type","text","ngModel","","name","boleta","required",""],["type","email","ngModel","","name","email","required",""],["type","password","ngModel","","name","password","required",""],["type","password","ngModel","","name","password_conf","required",""],["name","tipo_usuario",3,"ngModelChange","ionChange","ngModel"],["id","tipo_label"],["color","dark","shape","round","expand","block","type","submit",3,"disabled"],["name","arrow-forward"]],template:function(t,r){if(1&t){const i=e.RV6();e.j41(0,"ion-content",1),e.nrm(1,"br")(2,"ion-icon",2)(3,"br"),e.j41(4,"h2",3)(5,"b"),e.EFF(6,"Registrarse"),e.k0s()(),e.j41(7,"form",4,0),e.bIt("ngSubmit",function(){e.eBV(i);const a=e.sdS(8);return e.Njj(r.onRegister(a))}),e.j41(9,"ion-item",5)(10,"ion-label",6),e.EFF(11,"Nombre*"),e.k0s(),e.nrm(12,"ion-input",7),e.k0s(),e.j41(13,"ion-item",5)(14,"ion-label",8),e.EFF(15,"Boleta*"),e.k0s(),e.nrm(16,"ion-input",9),e.k0s(),e.j41(17,"ion-item",5)(18,"ion-label",8),e.EFF(19,"Correo electr\xf3nico*"),e.k0s(),e.nrm(20,"ion-input",10),e.k0s(),e.j41(21,"ion-item",5)(22,"ion-label",8),e.EFF(23,"Contrase\xf1a*"),e.k0s(),e.nrm(24,"ion-input",11),e.k0s(),e.j41(25,"ion-item",5)(26,"ion-label",8),e.EFF(27,"Confirmar contrase\xf1a*"),e.k0s(),e.nrm(28,"ion-input",12),e.k0s(),e.j41(29,"ion-item",5)(30,"ion-label",8),e.EFF(31,"Tipo de cuenta"),e.k0s(),e.j41(32,"ion-toggle",13),e.mxI("ngModelChange",function(a){return e.eBV(i),e.DH7(r.tipo_usuario,a)||(r.tipo_usuario=a),e.Njj(a)}),e.bIt("ionChange",function(){return e.eBV(i),e.Njj(r.updateTipoLabel())}),e.k0s(),e.j41(33,"ion-label",14),e.EFF(34,"Comprador"),e.k0s()(),e.nrm(35,"br"),e.j41(36,"ion-button",15),e.EFF(37," Registrar \xa0"),e.nrm(38,"ion-icon",16),e.k0s()()()}if(2&t){const i=e.sdS(8);e.R7$(32),e.R50("ngModel",r.tipo_usuario),e.R7$(4),e.Y8G("disabled",!i.valid)}},dependencies:[u.qT,u.BC,u.cb,u.YS,u.vS,u.cV,n.Jm,n.W9,n.iq,n.$w,n.uz,n.he,n.BY,n.hB,n.Gw,n.N7,p.Wk],styles:["ion-button[_ngcontent-%COMP%]{font-size:16px}"]}),l})()}];let M=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[p.iI.forChild(C),p.iI]}),l})(),j=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[b.MD,u.YN,n.bv,M]}),l})()}}]);