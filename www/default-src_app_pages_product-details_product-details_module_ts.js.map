{"version":3,"file":"default-src_app_pages_product-details_product-details_module_ts.js","mappings":"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","sources":["./src/app/pages/product-details/product-details-routing.module.ts","./src/app/pages/product-details/product-details.module.ts","./src/app/pages/product-details/product-details.page.ts","./src/app/pages/product-details/product-details.page.html","./src/app/services/cart.service.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ProductDetailsPage } from './product-details.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ProductDetailsPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ProductDetailsPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ProductDetailsPageRoutingModule } from './product-details-routing.module';\r\n\r\nimport { ProductDetailsPage } from './product-details.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ProductDetailsPageRoutingModule\r\n  ],\r\n  declarations: [ProductDetailsPage]\r\n})\r\nexport class ProductDetailsPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ApiService } from '../../services/api.service';\r\nimport { CartService } from '../../services/cart.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Router } from '@angular/router';\r\nimport { Product } from 'src/app/interfaces/products.interface';\r\n\r\n@Component({\r\n  selector: 'app-product-details',\r\n  templateUrl: './product-details.page.html',\r\n  styleUrls: ['./product-details.page.scss'],\r\n})\r\nexport class ProductDetailsPage implements OnInit {\r\n\r\n  productId = '';\r\n  productDetails!: any;\r\n\r\n  constructor(\r\n    private activatedRoute: ActivatedRoute, \r\n    protected apiService: ApiService, \r\n    private cartService: CartService,\r\n    private router: Router,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.activatedRoute.params.subscribe(params => {\r\n      this.productId = params['id'];\r\n      this.loadProductDetails(this.productId);\r\n    });\r\n  }\r\n\r\n  loadProductDetails(productId: string) {\r\n    this.apiService.productDetails(productId).subscribe(\r\n      (response: any) => {\r\n        if (response) {\r\n          // Convertir el precio a número\r\n          response.precio = parseFloat(response.precio);\r\n          this.productDetails = response;\r\n          console.log(this.productDetails);\r\n        } else {\r\n          console.error('API response was not successful');\r\n        }\r\n      },\r\n      error => {\r\n        console.error('Error fetching product details', error);\r\n      }\r\n    );\r\n  }\r\n\r\n  addProductCart(product: any) {\r\n    // Verificar si el producto tiene un id_producto\r\n    if (!product.id_producto) {\r\n      console.error('Product does not have an id_producto:', product);\r\n      return;\r\n    }\r\n\r\n    console.log('Adding product to cart:', product);\r\n    let cartProducts = localStorage.getItem('cartProducts');\r\n    let products = cartProducts ? JSON.parse(cartProducts) : [];\r\n\r\n    // Verificar si el producto ya existe en el carrito\r\n    const productIndex = products.findIndex((p: any) => p.id_producto === product.id_producto);\r\n    if (productIndex === -1) {\r\n      products.push({ ...product, quantity: 1 });\r\n    } else {\r\n      products[productIndex].quantity += 1; // Si ya existe, incrementar la cantidad\r\n    }\r\n\r\n    localStorage.setItem('cartProducts', JSON.stringify(products));\r\n    this.cartService.setCartProducts(products);\r\n    this.cartService.setCartStatus(true);\r\n    console.log('Updated cart products:', products);\r\n\r\n    // Navegar al carrito\r\n    this.router.navigate(['/tabs/cart']);\r\n  }\r\n\r\n\r\n}\r\n","<ion-header [translucent]=\"true\">\r\n  <ion-toolbar>\r\n    <ion-title>Producto</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content [fullscreen]=\"true\">\r\n  <ion-header collapse=\"condense\">\r\n    <ion-toolbar>\r\n      <ion-title size=\"large\"><i class=\"fa-solid fa-arrow-left\" routerLink=\"/\"></i> Regresar</ion-title>\r\n    </ion-toolbar>\r\n  </ion-header>\r\n\r\n  <div *ngIf=\"productDetails\" class=\"ion-padding\">\r\n    <img width=\"100%\" [src]=\"productDetails.imagen ? ('https://mercadito-app.azurewebsites.net/images/products/' + productDetails.imagen) : 'https://via.placeholder.com/150'\" alt=\"Product Image\">\r\n    <p style=\"font-size: 18px; margin-top: 10px;\"><b>{{ productDetails.nombre }}</b></p>\r\n    <p style=\"font-size: 16px; margin-top: -30px;\"><br><b>Descripción</b><br></p>\r\n    <p style=\"font-size: 12px; margin-top: -10px;\">{{ productDetails.descripcion }}</p>\r\n    <p style=\"font-size: 12px; margin-top: -10px;\">Vendedor: {{ productDetails.nombre_de_usuario }}</p>\r\n  </div>\r\n</ion-content>\r\n\r\n<ion-footer>\r\n  <ion-toolbar>\r\n    <ion-row *ngIf=\"productDetails\">\r\n      <ion-col>\r\n        <p style=\"font-size: 12px; margin-left: 10px;\">Precio</p>\r\n        <p style=\"font-size: 16px; margin-left: 10px; margin-top: -10px;\"><b>${{ productDetails.precio | number:'1.2-2' }}</b></p>\r\n      </ion-col>\r\n      <ion-col class=\"ion-text-end\">\r\n        <ion-button style=\"margin-top: 15px;\" shape=\"round\" color=\"dark\" (click)=\"addProductCart(productDetails)\">Agregar al carrito</ion-button>\r\n      </ion-col>\r\n    </ion-row>\r\n  </ion-toolbar>\r\n</ion-footer>\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CartService {\r\n  private cartStatus = new BehaviorSubject<boolean>(false);\r\n  private cartProducts = new BehaviorSubject<any[]>([]);\r\n\r\n  constructor() {}\r\n\r\n  // Método para obtener el observable del estado de inicio de sesión\r\n  cartStatus$(): Observable<boolean> {\r\n    return this.cartStatus.asObservable();\r\n  }\r\n\r\n  // Método para obtener el observable del usuario actual\r\n  cartProducts$(): Observable<any> {\r\n    return this.cartProducts.asObservable();\r\n  }\r\n\r\n  // Método para establecer el estado de inicio de sesión\r\n  setCartStatus(value: boolean) {\r\n    this.cartStatus.next(value);\r\n  }\r\n\r\n  setCartProducts(products: any[]) {\r\n    this.cartProducts.next(products);\r\n  }\r\n\r\n  getCartProducts() {\r\n    return this.cartProducts.asObservable();\r\n  }\r\n\r\n  clearCart() {\r\n    this.cartProducts.next([]);\r\n    localStorage.removeItem('cartProducts');\r\n  }\r\n\r\n}\r\n"],"names":["RouterModule","ProductDetailsPage","routes","path","component","ProductDetailsPageRoutingModule","forChild","imports","i1","exports","CommonModule","FormsModule","IonicModule","ProductDetailsPageModule","declarations","i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ctx_r0","productDetails","imagen","ɵɵsanitizeUrl","ɵɵtextInterpolate","nombre","descripcion","ɵɵtextInterpolate1","nombre_de_usuario","ɵɵlistener","ProductDetailsPage_ion_row_13_Template_ion_button_click_9_listener","ɵɵrestoreView","_r2","ɵɵnextContext","ɵɵresetView","addProductCart","ɵɵpipeBind2","precio","constructor","activatedRoute","apiService","cartService","router","productId","ngOnInit","params","subscribe","loadProductDetails","response","parseFloat","console","log","error","product","id_producto","cartProducts","localStorage","getItem","products","JSON","parse","productIndex","findIndex","p","push","quantity","setItem","stringify","setCartProducts","setCartStatus","navigate","ɵɵdirectiveInject","ActivatedRoute","i2","ApiService","i3","CartService","Router","selectors","decls","vars","consts","template","ProductDetailsPage_Template","rf","ctx","ɵɵtemplate","ProductDetailsPage_div_10_Template","ProductDetailsPage_ion_row_13_Template","BehaviorSubject","cartStatus","cartStatus$","asObservable","cartProducts$","value","next","getCartProducts","clearCart","removeItem","factory","ɵfac","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}