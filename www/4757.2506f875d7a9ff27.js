"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4757],{4757:(b,d,i)=>{i.r(d),i.d(d,{PerfilPageModule:()=>U});var f=i(177),p=i(4341),n=i(7863),u=i(8573),l=i(467),e=i(4438),h=i(4796),P=i(3366);function v(r,s){1&r&&(e.j41(0,"div",3)(1,"ion-button",4),e.EFF(2,"Iniciar sesi\xf3n"),e.k0s(),e.j41(3,"ion-button",5),e.EFF(4,"Registrarse"),e.k0s()())}function m(r,s){if(1&r){const o=e.RV6();e.j41(0,"div")(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),e.EFF(4),e.k0s(),e.j41(5,"ion-card-subtitle"),e.EFF(6),e.k0s()(),e.j41(7,"ion-card-content")(8,"ion-item"),e.nrm(9,"ion-icon",6),e.j41(10,"ion-label"),e.EFF(11),e.k0s()(),e.j41(12,"ion-item"),e.nrm(13,"ion-icon",7),e.j41(14,"ion-label"),e.EFF(15),e.k0s()()()(),e.j41(16,"ion-button",8),e.bIt("click",function(){e.eBV(o);const a=e.XpG();return e.Njj(a.onLogout())}),e.EFF(17,"Cerrar sesi\xf3n"),e.k0s()()}if(2&r){const o=e.XpG();e.R7$(4),e.JRh(o.currentUser.usuario),e.R7$(2),e.JRh(o.currentUser.boleta),e.R7$(5),e.JRh(o.currentUser.nombre_de_usuario),e.R7$(4),e.JRh(o.currentUser.tipo_de_usuario)}}const I=[{path:"",component:(()=>{var r;class s{constructor(t,a,c,g){this.router=t,this.authService=a,this.apiService=c,this.toastController=g,this.isLoggedIn=!1}ngOnInit(){this.checkLoggedIn(),this.authService.isLoggedIn$().subscribe(t=>{this.isLoggedIn=t}),this.authService.currentUser$().subscribe(t=>{this.currentUser=t,console.log(this.currentUser)})}checkLoggedIn(){const t=localStorage.getItem("currentUser");null!==t&&(this.authService.setCurrentUser(JSON.parse(t)),this.authService.setLoggedIn(!0))}onLogout(){var t=this;return(0,l.A)(function*(){t.apiService.logout().subscribe(function(){var a=(0,l.A)(function*(c){localStorage.removeItem("currentUser"),t.currentUser=null,t.authService.setLoggedIn(!1),t.authService.setCurrentUser(null),t.router.navigate(["/"]),(yield t.toastController.create({message:c,duration:2e3,position:"top"})).present()});return function(c){return a.apply(this,arguments)}}(),function(){var a=(0,l.A)(function*(c){console.error("Error al cerrar sesi\xf3n:",c),(yield t.toastController.create({message:c.error,duration:2e3,position:"top"})).present()});return function(c){return a.apply(this,arguments)}}())})()}}return(r=s).\u0275fac=function(t){return new(t||r)(e.rXU(u.Ix),e.rXU(h.u),e.rXU(P.G),e.rXU(n.K_))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-perfil"]],decls:7,vars:3,consts:[[1,"ion-padding",3,"fullscreen"],["class","ion-text-center",4,"ngIf"],[4,"ngIf"],[1,"ion-text-center"],["color","dark","shape","round","routerLink","/login"],["color","dark","shape","round","routerLink","/register"],["name","person-circle-outline","slot","start"],["name","basket","slot","start"],["color","danger","shape","round","expand","block",3,"click"]],template:function(t,a){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Perfil"),e.k0s()()(),e.j41(4,"ion-content",0),e.DNE(5,v,5,0,"div",1)(6,m,18,4,"div",2),e.k0s()),2&t&&(e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(),e.Y8G("ngIf",!a.isLoggedIn),e.R7$(),e.Y8G("ngIf",a.isLoggedIn))},dependencies:[f.bT,n.Jm,n.b_,n.I9,n.ME,n.HW,n.tN,n.W9,n.eU,n.iq,n.uz,n.he,n.BC,n.ai,n.N7,u.Wk],styles:["ion-button[_ngcontent-%COMP%]{font-size:12px;white-space:nowrap;width:-moz-fit-content;width:fit-content;height:35px;padding:5px;margin:5px auto;display:block}p[_ngcontent-%COMP%]{font-size:14px}img[_ngcontent-%COMP%]{border-radius:20px}"]}),s})()}];let F=(()=>{var r;class s{}return(r=s).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[u.iI.forChild(I),u.iI]}),s})(),U=(()=>{var r;class s{}return(r=s).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[f.MD,p.YN,n.bv,F]}),s})()}}]);