"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3825],{3825:(P,b,s)=>{s.r(b),s.d(b,{RegisterPageModule:()=>j});var R=s(177),u=s(4341),i=s(7863),m=s(8160),h=s(467),e=s(4438),f=s(3366),F=s(4796);const y=["registerForm"],C=[{path:"",component:(()=>{var o;class l{constructor(t,r,n,c){this.apiService=t,this.router=r,this.authService=n,this.toastController=c,this.tipo_usuario=!1}ngOnInit(){}updateTipoLabel(){document.getElementById("tipo_label").textContent=this.tipo_usuario?"Vendedor":"Comprador"}onRegister(t){var r=this;new FormData,this.apiService.register({usuario:t.value.usuario,boleta:t.value.boleta,password:t.value.password,password_conf:t.value.password_conf,email:t.value.email,tipo_usuario:this.tipo_usuario?"vendedor":"comprador"}).subscribe(function(){var a=(0,h.A)(function*(d){console.log("Respuesta del registro:",d);const p=yield r.toastController.create({message:d,duration:2e3,position:"top"});p.present(),r.apiService.login(t.value.boleta,t.value.password).subscribe(v=>{console.log("Respuesta de la API:",v),r.authService.setCurrentUser(v.body),r.authService.setLoggedIn(!0),r.router.navigate(["/"]),p.message="\xa1Sesi\xf3n iniciada!"},v=>{p.message="Error al iniciar sesi\xf3n, "+v.error}),p.present()});return function(d){return a.apply(this,arguments)}}(),function(){var a=(0,h.A)(function*(d){console.error("Error al registrar:",d),(yield r.toastController.create({message:d.error,duration:2e3,position:"top"})).present()});return function(d){return a.apply(this,arguments)}}())}}return(o=l).\u0275fac=function(t){return new(t||o)(e.rXU(f.G),e.rXU(m.Ix),e.rXU(F.u),e.rXU(i.K_))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-register"]],viewQuery:function(t,r){if(1&t&&e.GBs(y,5),2&t){let n;e.mGM(n=e.lsd())&&(r.registerForm=n.first)}},decls:39,vars:2,consts:[["registerForm","ngForm"],["color","light",1,"ion-padding"],["size","large","name","arrow-back","routerLink","/"],["size","large"],[3,"ngSubmit"],["color","light",1,"ion-no-padding"],["type","text","position","stacked"],["type","text","ngModel","","name","usuario","required",""],["position","stacked"],["type","text","ngModel","","name","boleta","required",""],["type","email","ngModel","","name","email","required",""],["type","password","ngModel","","name","password","required",""],["type","password","ngModel","","name","password_conf","required",""],["name","tipo_usuario",3,"ngModelChange","ionChange","ngModel"],["id","tipo_label"],["color","dark","shape","round","expand","block","type","submit",3,"disabled"],["name","arrow-forward"]],template:function(t,r){if(1&t){const n=e.RV6();e.j41(0,"ion-content",1),e.nrm(1,"br")(2,"ion-icon",2)(3,"br"),e.j41(4,"h2",3)(5,"b"),e.EFF(6,"Registrarse"),e.k0s()(),e.j41(7,"form",4,0),e.bIt("ngSubmit",function(){e.eBV(n);const a=e.sdS(8);return e.Njj(r.onRegister(a))}),e.j41(9,"ion-item",5)(10,"ion-label",6),e.EFF(11,"Nombre*"),e.k0s(),e.nrm(12,"ion-input",7),e.k0s(),e.j41(13,"ion-item",5)(14,"ion-label",8),e.EFF(15,"Boleta*"),e.k0s(),e.nrm(16,"ion-input",9),e.k0s(),e.j41(17,"ion-item",5)(18,"ion-label",8),e.EFF(19,"Correo electr\xf3nico*"),e.k0s(),e.nrm(20,"ion-input",10),e.k0s(),e.j41(21,"ion-item",5)(22,"ion-label",8),e.EFF(23,"Contrase\xf1a*"),e.k0s(),e.nrm(24,"ion-input",11),e.k0s(),e.j41(25,"ion-item",5)(26,"ion-label",8),e.EFF(27,"Confirmar contrase\xf1a*"),e.k0s(),e.nrm(28,"ion-input",12),e.k0s(),e.j41(29,"ion-item",5)(30,"ion-label",8),e.EFF(31,"Tipo de cuenta"),e.k0s(),e.j41(32,"ion-toggle",13),e.mxI("ngModelChange",function(a){return e.eBV(n),e.DH7(r.tipo_usuario,a)||(r.tipo_usuario=a),e.Njj(a)}),e.bIt("ionChange",function(){return e.eBV(n),e.Njj(r.updateTipoLabel())}),e.k0s(),e.j41(33,"ion-label",14),e.EFF(34,"Comprador"),e.k0s()(),e.nrm(35,"br"),e.j41(36,"ion-button",15),e.EFF(37," Registrar \xa0"),e.nrm(38,"ion-icon",16),e.k0s()()()}if(2&t){const n=e.sdS(8);e.R7$(32),e.R50("ngModel",r.tipo_usuario),e.R7$(4),e.Y8G("disabled",!n.valid)}},dependencies:[u.qT,u.BC,u.cb,u.YS,u.vS,u.cV,i.Jm,i.W9,i.iq,i.$w,i.uz,i.he,i.BY,i.hB,i.Gw,i.N7,m.Wk],styles:["ion-button[_ngcontent-%COMP%]{font-size:16px}"]}),l})()}];let M=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[m.iI.forChild(C),m.iI]}),l})(),j=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[R.MD,u.YN,i.bv,M]}),l})()}}]);