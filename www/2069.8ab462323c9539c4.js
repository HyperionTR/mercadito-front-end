"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2069],{2069:(C,d,s)=>{s.r(d),s.d(d,{HomePageModule:()=>S});var n=s(7863),g=s(177),u=s(4341),h=s(8160),e=s(4438),p=s(3366),m=s(4796);const f=r=>["/tabs/product-details",r];function P(r,a){1&r&&(e.j41(0,"ion-toolbar",7)(1,"ion-grid",8)(2,"ion-row")(3,"ion-col",9),e.EFF(4,"\xa1Se parte de la comunidad!"),e.k0s(),e.j41(5,"ion-col",10)(6,"ion-button",11),e.EFF(7,"Registrarse"),e.k0s()(),e.j41(8,"ion-col",12)(9,"ion-button",13),e.EFF(10,"Iniciar sesi\xf3n"),e.k0s()()()()())}function b(r,a){if(1&r&&(e.j41(0,"ion-toolbar",14)(1,"p",15),e.EFF(2,"\xa1Bienvenido!"),e.k0s(),e.j41(3,"p",16)(4,"b"),e.EFF(5),e.k0s()()()),2&r){const i=e.XpG();e.R7$(5),e.JRh(i.currentUser.nombre_de_usuario)}}function I(r,a){if(1&r&&(e.j41(0,"ion-col",17),e.nrm(1,"img",18),e.j41(2,"p",19),e.EFF(3),e.k0s(),e.j41(4,"p",20),e.nrm(5,"br"),e.j41(6,"b"),e.EFF(7),e.k0s(),e.nrm(8,"br"),e.EFF(9),e.k0s()()),2&r){const i=a.$implicit;e.R7$(),e.Y8G("src",i.imagen?"https://mercadito-app.azurewebsites.net/images/products/"+i.imagen:"https://via.placeholder.com/150",e.B4B)("routerLink",e.eq3(5,f,i.id_producto)),e.R7$(2),e.SpI(" ",i.nombre," "),e.R7$(4),e.JRh(i.precio),e.R7$(2),e.SpI(" por ",i.nombre_de_usuario,"")}}const H=[{path:"",component:(()=>{var r;class a{constructor(o,t){this.apiService=o,this.authService=t,this.products=[],this.currentPage=1,this.searchTerm="",this.isLoggedIn=!1}ngOnInit(){this.checkLoggedIn(),this.authService.isLoggedIn$().subscribe(o=>{this.isLoggedIn=o}),this.authService.currentUser$().subscribe(o=>{this.currentUser=o,console.log(this.currentUser)}),this.apiService.getProducts(this.currentPage).subscribe(o=>{this.products=o,this.currentPage++},o=>{console.error("Error al cargar productos:",o)})}checkLoggedIn(){const o=localStorage.getItem("currentUser");null!==o&&(this.authService.setCurrentUser(JSON.parse(o)),this.authService.setLoggedIn(!0))}loadData(o){this.searchTerm?this.apiService.searchProducts(this.currentPage,this.searchTerm).subscribe(t=>{t&&t.length>0?(this.products=this.products.concat(t),this.currentPage++):o&&(o.target.disabled=!0),o&&o.target.complete()},t=>{console.error("Error al cargar productos de b\xfasqueda:",t),o&&o.target.complete()}):this.apiService.getProducts(this.currentPage).subscribe(t=>{t&&t.length>0?(this.products=this.products.concat(t),this.currentPage++):o&&(o.target.disabled=!0),o&&o.target.complete()},t=>{console.error("Error al cargar m\xe1s productos:",t),o&&o.target.complete()})}onSearchChange(){this.products=[],this.currentPage=1,this.infiniteScroll.disabled=!1,this.loadData(null)}}return(r=a).\u0275fac=function(o){return new(o||r)(e.rXU(p.G),e.rXU(m.u))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-home"]],viewQuery:function(o,t){if(1&o&&e.GBs(n.Ax,5),2&o){let c;e.mGM(c=e.lsd())&&(t.infiniteScroll=c.first)}},decls:10,vars:5,consts:[["color","dark",4,"ngIf"],["color","light",4,"ngIf"],[3,"fullscreen"],["placeholder","Buscar productos",3,"ngModelChange","ionChange","ngModel"],["size","6",4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Cargando..."],["color","dark"],[1,"ion-text-center"],["size","5"],["size","3"],["size","small","color","light","shape","round","routerLink","/register"],["size","4"],["size","small","color","light","shape","round","routerLink","/login"],["color","light"],[2,"margin-left","10px"],[2,"font-size","16px","margin-left","10px","margin-top","-10px"],["size","6"],["width","100%","alt","Product Image",3,"src","routerLink"],[2,"font-size","16px","margin-top","0px"],[2,"margin-top","-30px"]],template:function(o,t){1&o&&(e.j41(0,"ion-header"),e.DNE(1,P,11,0,"ion-toolbar",0)(2,b,6,1,"ion-toolbar",1),e.k0s(),e.j41(3,"ion-content",2)(4,"ion-searchbar",3),e.mxI("ngModelChange",function(l){return e.DH7(t.searchTerm,l)||(t.searchTerm=l),l}),e.bIt("ionChange",function(){return t.onSearchChange()}),e.k0s(),e.j41(5,"ion-grid")(6,"ion-row"),e.DNE(7,I,10,7,"ion-col",4),e.k0s()(),e.j41(8,"ion-infinite-scroll",5),e.bIt("ionInfinite",function(l){return t.loadData(l)}),e.nrm(9,"ion-infinite-scroll-content",6),e.k0s()()),2&o&&(e.R7$(),e.Y8G("ngIf",!t.isLoggedIn),e.R7$(),e.Y8G("ngIf",t.isLoggedIn),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(),e.R50("ngModel",t.searchTerm),e.R7$(3),e.Y8G("ngForOf",t.products))},dependencies:[n.Jm,n.hU,n.W9,n.lO,n.eU,n.Ax,n.Hp,n.ln,n.S1,n.ai,n.Gw,n.N7,g.Sq,g.bT,u.BC,u.vS,h.Wk],styles:["ion-button[_ngcontent-%COMP%]{font-size:12px;white-space:nowrap;width:90px;height:35px}p[_ngcontent-%COMP%]{font-size:14px}img[_ngcontent-%COMP%]{border-radius:20px}"]}),a})(),children:[{path:"product-details/:id",loadChildren:()=>s.e(2076).then(s.bind(s,2987)).then(r=>r.ProductDetailsPageModule)}]}];let F=(()=>{var r;class a{}return(r=a).\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[h.iI.forChild(H),h.iI]}),a})(),S=(()=>{var r;class a{}return(r=a).\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[n.bv,g.MD,u.YN,F]}),a})()}}]);