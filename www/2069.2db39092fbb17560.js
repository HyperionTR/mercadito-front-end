"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2069],{2069:(C,h,s)=>{s.r(h),s.d(h,{HomePageModule:()=>F});var i=s(7863),g=s(177),u=s(4341),d=s(8160),e=s(4438),m=s(3366),p=s(4796);const f=t=>["/tabs/product-details",t];function P(t,a){1&t&&(e.j41(0,"ion-toolbar",7)(1,"ion-grid",8)(2,"ion-row")(3,"ion-col",9),e.EFF(4,"\xa1Se parte de la comunidad!"),e.k0s(),e.j41(5,"ion-col",9)(6,"ion-button",10),e.EFF(7,"Registrarse"),e.k0s()(),e.j41(8,"ion-col",9)(9,"ion-button",11),e.EFF(10,"Iniciar sesi\xf3n"),e.k0s()()()()())}function b(t,a){if(1&t&&(e.j41(0,"ion-toolbar",12)(1,"p",13),e.EFF(2,"\xa1Bienvenido!"),e.k0s(),e.j41(3,"p",14)(4,"b"),e.EFF(5),e.k0s()()()),2&t){const n=e.XpG();e.R7$(5),e.JRh(null==n.currentUser?null:n.currentUser.nombre_de_usuario)}}function I(t,a){if(1&t&&(e.j41(0,"ion-col",15),e.nrm(1,"img",16),e.j41(2,"p",17),e.EFF(3),e.k0s(),e.j41(4,"p",18),e.nrm(5,"br"),e.j41(6,"b"),e.EFF(7),e.k0s(),e.nrm(8,"br"),e.EFF(9),e.k0s()()),2&t){const n=a.$implicit,o=e.XpG();e.R7$(),e.Y8G("src",o.apiService.getProductImage(n.imagen,n.placeholder),e.B4B)("routerLink",e.eq3(5,f,n.id_producto)),e.R7$(2),e.SpI(" ",n.nombre," "),e.R7$(4),e.JRh(n.precio),e.R7$(2),e.SpI(" por ",n.nombre_de_usuario,"")}}const H=[{path:"",component:(()=>{var t;class a{constructor(o,r){this.apiService=o,this.authService=r,this.products=[],this.currentPage=1,this.searchTerm="",this.isLoggedIn=!1,this.currentUser=null}ngOnInit(){this.authService.isLoggedIn$().subscribe(o=>{this.isLoggedIn=o}),this.authService.currentUser$(!1).subscribe(o=>{this.currentUser=o,console.log(this.currentUser)})}ionViewWillEnter(){this.products=[],this.currentPage=1,this.loadData(null),this.infiniteScroll.disabled=!1}checkLoggedIn(){const o=localStorage.getItem("currentUser");null!==o&&(this.authService.setCurrentUser(JSON.parse(o)),this.authService.setLoggedIn(!0))}loadData(o){this.searchTerm?this.apiService.searchProducts(this.currentPage,this.searchTerm).subscribe(r=>{r&&r.length>0?(o&&(o.target.disabled=!0),this.products=this.products.concat(r),this.currentPage++,o.target.complete()):o&&(o.target.disabled=!0)},r=>{console.error("Error al cargar productos de b\xfasqueda:",r),o&&o.target.complete()}):this.apiService.getProducts(this.currentPage).subscribe(r=>{r&&r.length>0?(o&&o.target.complete(),this.products=this.products.concat(r),this.currentPage++):o&&(o.target.disabled=!0,o.target.complete())},r=>{console.error("Error al cargar m\xe1s productos:",r),o&&o.target.complete()})}onSearchChange(){this.products=[],this.currentPage=1,this.infiniteScroll.disabled=!1,this.loadData(null)}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(m.G),e.rXU(p.u))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-home"]],viewQuery:function(o,r){if(1&o&&e.GBs(i.Ax,5),2&o){let l;e.mGM(l=e.lsd())&&(r.infiniteScroll=l.first)}},decls:10,vars:5,consts:[["color","dark",4,"ngIf"],["color","light",4,"ngIf"],[3,"fullscreen"],["placeholder","Buscar productos",3,"ngModelChange","ionChange","ngModel"],["size","6",4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Cargando productos..."],["color","dark"],[1,"ion-text-center","ion-justify-content-center","ion-align-items-center","loginToolbar"],["size","3"],["color","light","shape","round","routerLink","/register"],["color","light","shape","round","routerLink","/login"],["color","light"],[2,"margin-left","10px"],[2,"font-size","16px","margin-left","10px","margin-top","-10px"],["size","6"],["width","100%","alt","Product Image",3,"src","routerLink"],[2,"font-size","16px","margin-top","0px"],[2,"margin-top","-30px"]],template:function(o,r){1&o&&(e.j41(0,"ion-header"),e.DNE(1,P,11,0,"ion-toolbar",0)(2,b,6,1,"ion-toolbar",1),e.k0s(),e.j41(3,"ion-content",2)(4,"ion-searchbar",3),e.mxI("ngModelChange",function(c){return e.DH7(r.searchTerm,c)||(r.searchTerm=c),c}),e.bIt("ionChange",function(){return r.onSearchChange()}),e.k0s(),e.j41(5,"ion-grid")(6,"ion-row"),e.DNE(7,I,10,7,"ion-col",4),e.k0s()(),e.j41(8,"ion-infinite-scroll",5),e.bIt("ionInfinite",function(c){return r.loadData(c)}),e.nrm(9,"ion-infinite-scroll-content",6),e.k0s()()),2&o&&(e.R7$(),e.Y8G("ngIf",!r.isLoggedIn),e.R7$(),e.Y8G("ngIf",r.isLoggedIn),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(),e.R50("ngModel",r.searchTerm),e.R7$(3),e.Y8G("ngForOf",r.products))},dependencies:[i.Jm,i.hU,i.W9,i.lO,i.eU,i.Ax,i.Hp,i.ln,i.S1,i.ai,i.Gw,i.N7,g.Sq,g.bT,u.BC,u.vS,d.Wk],styles:["ion-button[_ngcontent-%COMP%]{font-size:12px;white-space:normal;width:80%;height:35px}p[_ngcontent-%COMP%]{font-size:14px}img[_ngcontent-%COMP%]{border-radius:20px}ion-row[_ngcontent-%COMP%]{vertical-align:middle}ion-grid.loginToolbar[_ngcontent-%COMP%]{--ion-grid-columns: 9}"]}),a})(),children:[{path:"product-details/:id",loadChildren:()=>s.e(2076).then(s.bind(s,2987)).then(t=>t.ProductDetailsPageModule)}]}];let S=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[d.iI.forChild(H),d.iI]}),a})(),F=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[i.bv,g.MD,u.YN,S]}),a})()}}]);